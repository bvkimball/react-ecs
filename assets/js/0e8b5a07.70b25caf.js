(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{149:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return w})),n.d(t,"metadata",(function(){return C})),n.d(t,"toc",(function(){return k})),n.d(t,"default",(function(){return S}));var r=n(3),i=n(7),o=n(0),c=n.n(o),a=n(160),u=n(188),s=n(164),l=n(4),f=n(162),p=n(180),d=n(165),m=n(183),y=n(281),h=n(285),b=n(262),v=n(189),g=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=e.call.apply(e,[this].concat(r))||this,Object(f.a)(Object(s.a)(t),"rotation",new p.Vector3(0,0,0)),t}return Object(l.a)(t,e),t}(d.Facet),O=function(){var e=Object(d.useQuery)((function(e){return e.hasAll(m.a,g)}));return Object(d.useSystem)((function(t){e.loop([m.a,g],(function(e,n){var r=n[0],i=n[1],o=r.ref.current,c=i.rotation.clone().multiplyScalar(t),a=o.rotation.toVector3().add(c);o.rotation.setFromVector3(a)}))}))},j=function(){return c.a.createElement(d.Entity,null,c.a.createElement(g,{rotation:new p.Vector3(1,1,1)}),c.a.createElement(m.a,null,c.a.createElement(y.a,{scale:3,rotation:[Object(d.rad)(45),Object(d.rad)(45),0]},c.a.createElement("meshLambertMaterial",null))))},E=function(){var e=Object(d.useECS)();return Object(d.useAnimationFrame)((function(t){return e.update(t)})),c.a.createElement(v.a,null,c.a.createElement(h.a,null),c.a.createElement(b.a,{makeDefault:!0,position:[0,0,8]},c.a.createElement("ambientLight",{intensity:.2}),c.a.createElement("directionalLight",{position:[1,1,1]})),c.a.createElement(e.Provider,null,c.a.createElement(O,null),c.a.createElement(j,null)))},w={sidebar_position:1,sidebar_label:"Spinning Cube",title:"Spinning Cube"},C={unversionedId:"three/SpinningCube",id:"three/SpinningCube",isDocsHomePage:!1,title:"Spinning Cube",description:"",source:"@site/examples/three/SpinningCube.md",sourceDirName:"three",slug:"/three/SpinningCube",permalink:"/examples/three/SpinningCube",version:"current",sidebar_label:"Spinning Cube",sidebarPosition:1,frontMatter:{sidebar_position:1,sidebar_label:"Spinning Cube",title:"Spinning Cube"},sidebar:"mySidebar",previous:{title:"Simple Cube",permalink:"/examples/three/SimpleCube"},next:{title:"Particle System",permalink:"/examples/three/ParticleSystem"}},k=[],x={toc:k};function S(e){var t=e.components,n=Object(i.a)(e,["components"]);return Object(a.b)("wrapper",Object(r.a)({},x,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)(u.a,{code:"import React, { FC } from 'react';\n\nimport { Vector3 } from 'three';\n\nimport {\n    Entity,\n    Facet,\n    rad,\n    useAnimationFrame,\n    useECS,\n    useQuery,\n    useSystem\n} from '@react-ecs/core';\nimport { ThreeView } from '@react-ecs/three';\nimport {\n    Box,\n    OrbitControls,\n    PerspectiveCamera\n} from '@react-three/drei';\nimport { Canvas } from '@react-three/fiber';\n\nclass Spinning extends Facet<Spinning> {\n    rotation = new Vector3(0, 0, 0);\n}\n\nconst SpinningSystem = () => {\n    const query = useQuery(e => e.hasAll(ThreeView, Spinning));\n\n    return useSystem((dt: number) => {\n        query.loop([ThreeView, Spinning], (e, [view, spin]) => {\n            const transform = view.ref.current!;\n            const rotation = spin.rotation.clone().multiplyScalar(dt);\n            const newRotation = transform.rotation\n                .toVector3()\n                .add(rotation);\n            transform.rotation.setFromVector3(newRotation);\n        });\n    });\n};\n\nconst SpinCube = () => {\n    return (\n        <Entity>\n            <Spinning rotation={new Vector3(1, 1, 1)} />\n            <ThreeView>\n                <Box scale={3} rotation={[rad(45), rad(45), 0]}>\n                    <meshLambertMaterial />\n                </Box>\n            </ThreeView>\n        </Entity>\n    );\n};\n\n\nexport const SpinningCube: FC = () => {\n    const ECS = useECS();\n\n    useAnimationFrame((dt) => ECS.update(dt));\n\n    return (\n        <Canvas>\n            <OrbitControls />\n            <PerspectiveCamera makeDefault position={[0, 0, 8]}>\n                <ambientLight intensity={.2} />\n                <directionalLight position={[1, 1, 1]} />\n            </PerspectiveCamera>\n            <ECS.Provider>\n                <SpinningSystem />\n                <SpinCube />\n            </ECS.Provider>\n        </Canvas>\n    );\n};\n",style:{minHeight:"auto",padding:"1em"},mdxType:"Example"},Object(a.b)(E,{mdxType:"SpinningCube"})))}S.isMDXComponent=!0},160:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return m}));var r=n(0),i=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=i.a.createContext({}),l=function(e){var t=i.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},f=function(e){var t=l(e.components);return i.a.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},d=i.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,c=e.parentName,s=u(e,["components","mdxType","originalType","parentName"]),f=l(n),d=r,m=f["".concat(c,".").concat(d)]||f[d]||p[d]||o;return n?i.a.createElement(m,a(a({ref:t},s),{},{components:n})):i.a.createElement(m,a({ref:t},s))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,c=new Array(o);c[0]=d;var a={};for(var u in t)hasOwnProperty.call(t,u)&&(a[u]=t[u]);a.originalType=e,a.mdxType="string"==typeof e?e:r,c[1]=a;for(var s=2;s<o;s++)c[s]=n[s];return i.a.createElement.apply(null,c)}return i.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},161:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return s}));var r=n(162),i=n(0),o=n.n(i),c=n(175),a=n(168),u=Object(i.createContext)(null),s=function(){function e(e,t){var n=this;void 0===e&&(e=[]),void 0===t&&(t=[]),Object(r.a)(this,"engine",new c.Engine),Object(r.a)(this,"systems",new a.a),this.update=this.update.bind(this),this.Provider=this.Provider.bind(this),e.forEach((function(e){return n.systems.add(e)})),t.forEach((function(e){return n.engine.addEntity(e)}))}var t=e.prototype;return t.update=function(e){this.systems.update(e)},t.Provider=function(e){return o.a.createElement(u.Provider,{value:this},e.children)},e}()},163:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var r=n(0),i=Object(r.createContext)(null);function o(){var e=Object(r.useContext)(i);if(!e)throw new Error("Missing Entity instance in EntityContext!");return e}},165:function(e,t,n){"use strict";var r=n(179);n.d(t,"DOMView",(function(){return r.a})),n.d(t,"ECSContext",(function(){return r.b})),n.d(t,"Emitter",(function(){return r.c})),n.d(t,"Entity",(function(){return r.d})),n.d(t,"Facet",(function(){return r.e}));var i=n(173);n.d(t,"EntityContext",(function(){return i.a})),n.d(t,"useAnimationFrame",(function(){return i.b})),n.d(t,"useECS",(function(){return i.c})),n.d(t,"useEngine",(function(){return i.d})),n.d(t,"useFacet",(function(){return i.e})),n.d(t,"useQuery",(function(){return i.f})),n.d(t,"useSystem",(function(){return i.g}));var o=n(176);n.o(o,"rad")&&n.d(t,"rad",(function(){return o.rad}))},166:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(0),i=n(161),o=function(){return Object(r.useContext)(i.b).engine}},168:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){function e(){this.systems=new Array}var t=e.prototype;return t.sort=function(){this.systems.sort((function(e,t){return e.priority-t.priority}))},t.add=function(e,t){void 0===t&&(t=0),this.systems.push({callback:e,priority:t}),this.sort()},t.remove=function(e){var t=this.systems.findIndex((function(t){return t.callback===e}));return t>-1&&(this.systems.splice(t,1),this.sort(),!0)},t.clear=function(){this.systems=[]},t.update=function(e){this.systems.forEach((function(t){return t.callback(e)}))},e}()},169:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(184),i=n(4),o=n(175),c=function(e){function t(){return e.apply(this,arguments)||this}return Object(i.a)(t,e),t.prototype.loop=function(e,t){for(var n,i=Object(r.a)(this.entities);!(n=i()).done;){for(var o,c=n.value,a=[],u=Object(r.a)(e);!(o=u()).done;){var s=o.value,l=c.get(s);a.push(l)}t(c,a)}},t}(o.Query)},170:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0);function i(e){var t=Object(r.useRef)(e),n=Object(r.useState)({current:e}),i=(n[0],n[1]);return[t,function(e){t.current=e,i({current:e})}]}},171:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(0),i=n(161),o=function(e,t){void 0===t&&(t=0);var n=Object(r.useContext)(i.b).systems;return Object(r.useEffect)((function(){return n.add(e,t),function(){n.remove(e)}}),[e,t]),null}},172:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(0),i=n(171),o=function(e,t){var n=Object(r.useRef)(0);Object(i.a)((function(r){n.current+=r,n.current>e&&(n.current=0,t())}))}},173:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return a.a})),n.d(t,"a",(function(){return u.a})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return d})),n.d(t,"g",(function(){return m.a}));var r=n(0),i=function(e){var t=Object(r.useRef)(null),n=Object(r.useRef)(null),i=function r(i){if(null!=n.current){var o=i-n.current;e(o/1e3)}n.current=i,t.current=requestAnimationFrame(r)};Object(r.useEffect)((function(){return t.current=requestAnimationFrame(i),function(){return cancelAnimationFrame(t.current)}}),[])},o=n(161);function c(){var e=Object(r.useState)((function(){return new o.a}))[0];return Object(r.useEffect)((function(){"undefined"!=typeof window&&(window.ecs=e)})),e}var a=n(166),u=n(163);function s(e){var t=Object(u.b)(),n=Object(r.useState)(new e),i=n[0],o=n[1];return Object(r.useEffect)((function(){var n=t.get(e);n?o(n):console.error("Couldn't find facet on entity: "+e.prototype.constructor.name)})),i}var l=n(169),f=n(181),p=function(){function e(e){this.ref=e}var t=e.prototype;return t.loop=function(e,t){if(this.current)return this.current.loop(e,t)},t.countBy=function(e){return this.current?this.current.countBy(e):0},t.filter=function(e){return this.current?this.current.filter(e):[]},t.has=function(e){return!!this.current&&this.current.has(e)},t.clear=function(){if(this.current)return this.current.clear()},Object(f.a)(e,[{key:"current",get:function(){return this.ref.current}},{key:"entities",get:function(){if(this.current)return this.current.entities}},{key:"first",get:function(){if(this.current)return this.current.first}},{key:"last",get:function(){if(this.current)return this.current.last}},{key:"length",get:function(){if(this.current)return this.current.length}},{key:"isEmpty",get:function(){return!this.current||this.current.isEmpty}}]),e}();function d(e,t){var n=Object(a.a)(),i=Object(r.useRef)(),o=Object(r.useState)(0),c=o[0],u=o[1],s=function(){return u(c+1)};return Object(r.useEffect)((function(){if(void 0===i.current){var r=new l.a(e);null!=t&&t.added&&r.onEntityAdded.connect(t.added),null!=t&&t.removed&&r.onEntityRemoved.connect(t.removed),r.onEntityAdded.connect(s),r.onEntityRemoved.connect(s),n.addQuery(r),i.current=r,s()}}),[]),new p(i)}n(170);var m=n(171);n(172)},176:function(e,t,n){"use strict";n(169);var r=n(177);n.o(r,"rad")&&n.d(t,"rad",(function(){return r.rad}));n(168);var i=n(178);n.d(t,"rad",(function(){return i.a}))},177:function(e,t){},178:function(e,t,n){"use strict";function r(e){return e*Math.PI/180}n.d(t,"a",(function(){return r}))},179:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return f.b})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return g})),n.d(t,"e",(function(){return E}));var r=n(181),i=n(164),o=n(4),c=n(162),a=n(0),u=n.n(a),s=n(173),l=function(e){function t(t){var n;return n=e.call(this,t)||this,Object(c.a)(Object(i.a)(n),"context",void 0),Object(c.a)(Object(i.a)(n),"ref",void 0),n.ref=Object(a.createRef)(),n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.context.add(this)},n.render=function(){if(1!==a.Children.count(this.props.children))throw new Error("<DOMView /> must have a single child.");return u.a.createElement(u.a.Fragment,null,Object(a.cloneElement)(this.props.children,{ref:this.ref}))},Object(r.a)(t,[{key:"element",get:function(){return this.ref.current}}]),t}(a.Component);Object(c.a)(l,"contextType",s.a),l.__componentClassId__=-1;var f=n(161),p=n(166),d=n(170),m=n(172),y={emissionDelay:.1},h=function(e){var t=Object(p.a)(),n=(e=Object.assign({},y,e)).emissionDelay,r=Object(a.useRef)(0),i=e.children,o=Object(d.a)([]),c=o[0],s=o[1];Object(m.a)(n,(function(){var e,t;s([].concat(c.current,[(e=Object(a.createRef)(),t=r.current++,{element:i instanceof Function?Object.assign({},i(),{ref:e,key:t}):Object(a.cloneElement)(i,Object.assign({},{},{ref:e,key:t})),ref:e})]))}));var l=function(e){!function(e){if(e>-1)if(1===c.current.length)s([]);else{var t=c.current.slice(0,e),n=c.current.slice(e+1);s(t.concat(n))}}(c.current.findIndex((function(t){var n;return(null===(n=t.ref.current)||void 0===n?void 0:n.entity.id)===e.id})))};return Object(a.useEffect)((function(){return t.onEntityRemoved.connect(l),function(){t.onEntityRemoved.disconnect(l)}}),[]),u.a.createElement(u.a.Fragment,null,c.current.map((function(e){return e.element})))},b=n(175),v=n(163),g=function(e){function t(t){var n;return n=e.call(this,t)||this,Object(c.a)(Object(i.a)(n),"context",void 0),Object(c.a)(Object(i.a)(n),"entity",void 0),n.entity=new b.Entity,n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.context.engine.addEntity(this.entity)},n.componentWillUnmount=function(){this.entity.clear(),this.entity.invalidate(),this.context.engine.removeEntity(this.entity)},n.render=function(){return u.a.createElement(v.a.Provider,{value:this.entity},this.props.children)},t}(a.Component);Object(c.a)(g,"contextType",f.b);var O=n(195);Object(O.a)({enforceActions:"never"});var j=["props","context","refs","updater","meta"],E=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,Object(c.a)(Object(i.a)(t),"context",void 0),t}Object(o.a)(t,e);var n=t.prototype;return n.createFake=function(){return new(0,Object.getPrototypeOf(this).constructor)},n.getAnnotations=function(e){var t=new Map(Object.getOwnPropertyNames(e).filter((function(e){return!j.includes(e)&&!e.endsWith("Ref")})).map((function(e){return[e,O.c]}))).entries();return Object.fromEntries(t)},n.asComponent=function(){return this},n.componentDidMount=function(){if(this.context){Object.assign(this,this.props);var e=this.createFake(),t=this.getAnnotations(e);Object(O.b)(this,t,{autoBind:!0}),this.context.add(this)}else console.error("Data Component without Entity Context!")},n.render=function(){return null},t}(a.Component);Object(c.a)(E,"contextType",v.a)},182:function(e,t,n){"use strict";n.d(t,"b",(function(){return c}));var r=n(23),i={plain:{backgroundColor:"#2a2734",color:"#9a86fd"},styles:[{types:["comment","prolog","doctype","cdata","punctuation"],style:{color:"#6c6783"}},{types:["namespace"],style:{opacity:.7}},{types:["tag","operator","number"],style:{color:"#e09142"}},{types:["property","function"],style:{color:"#9a86fd"}},{types:["tag-id","selector","atrule-id"],style:{color:"#eeebff"}},{types:["attr-name"],style:{color:"#c4b9fe"}},{types:["boolean","string","entity","url","attr-value","keyword","control","directive","unit","statement","regex","at-rule","placeholder","variable"],style:{color:"#ffcc99"}},{types:["deleted"],style:{textDecorationLine:"line-through"}},{types:["inserted"],style:{textDecorationLine:"underline"}},{types:["italic"],style:{fontStyle:"italic"}},{types:["important","bold"],style:{fontWeight:"bold"}},{types:["important"],style:{color:"#c4b9fe"}}]},o=n(0),c={Prism:r.a,theme:i};function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=/\r\n|\r|\n/,l=function(e){0===e.length?e.push({types:["plain"],content:"\n",empty:!0}):1===e.length&&""===e[0].content&&(e[0].content="\n",e[0].empty=!0)},f=function(e,t){var n=e.length;return n>0&&e[n-1]===t?e:e.concat(t)},p=function(e,t){var n=e.plain,r=Object.create(null),i=e.styles.reduce((function(e,n){var r=n.languages,i=n.style;return r&&!r.includes(t)||n.types.forEach((function(t){var n=u({},e[t],i);e[t]=n})),e}),r);return i.root=n,i.plain=u({},n,{backgroundColor:null}),i};function d(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&-1===t.indexOf(r)&&(n[r]=e[r]);return n}var m=function(e){function t(){for(var t=this,n=[],r=arguments.length;r--;)n[r]=arguments[r];e.apply(this,n),a(this,"getThemeDict",(function(e){if(void 0!==t.themeDict&&e.theme===t.prevTheme&&e.language===t.prevLanguage)return t.themeDict;t.prevTheme=e.theme,t.prevLanguage=e.language;var n=e.theme?p(e.theme,e.language):void 0;return t.themeDict=n})),a(this,"getLineProps",(function(e){var n=e.key,r=e.className,i=e.style,o=u({},d(e,["key","className","style","line"]),{className:"token-line",style:void 0,key:void 0}),c=t.getThemeDict(t.props);return void 0!==c&&(o.style=c.plain),void 0!==i&&(o.style=void 0!==o.style?u({},o.style,i):i),void 0!==n&&(o.key=n),r&&(o.className+=" "+r),o})),a(this,"getStyleForToken",(function(e){var n=e.types,r=e.empty,i=n.length,o=t.getThemeDict(t.props);if(void 0!==o){if(1===i&&"plain"===n[0])return r?{display:"inline-block"}:void 0;if(1===i&&!r)return o[n[0]];var c=r?{display:"inline-block"}:{},a=n.map((function(e){return o[e]}));return Object.assign.apply(Object,[c].concat(a))}})),a(this,"getTokenProps",(function(e){var n=e.key,r=e.className,i=e.style,o=e.token,c=u({},d(e,["key","className","style","token"]),{className:"token "+o.types.join(" "),children:o.content,style:t.getStyleForToken(o),key:void 0});return void 0!==i&&(c.style=void 0!==c.style?u({},c.style,i):i),void 0!==n&&(c.key=n),r&&(c.className+=" "+r),c})),a(this,"tokenize",(function(e,t,n,r){var i={code:t,grammar:n,language:r,tokens:[]};e.hooks.run("before-tokenize",i);var o=i.tokens=e.tokenize(i.code,i.grammar,i.language);return e.hooks.run("after-tokenize",i),o}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.render=function(){var e=this.props,t=e.Prism,n=e.language,r=e.code,i=e.children,o=this.getThemeDict(this.props),c=t.languages[n];return i({tokens:function(e){for(var t=[[]],n=[e],r=[0],i=[e.length],o=0,c=0,a=[],u=[a];c>-1;){for(;(o=r[c]++)<i[c];){var p=void 0,d=t[c],m=n[c][o];if("string"==typeof m?(d=c>0?d:["plain"],p=m):(d=f(d,m.type),m.alias&&(d=f(d,m.alias)),p=m.content),"string"==typeof p){var y=p.split(s),h=y.length;a.push({types:d,content:y[0]});for(var b=1;b<h;b++)l(a),u.push(a=[]),a.push({types:d,content:y[b]})}else c++,t.push(d),n.push(p),r.push(0),i.push(p.length)}c--,t.pop(),n.pop(),r.pop(),i.pop()}return l(a),u}(void 0!==c?this.tokenize(t,r,c,n):[r]),className:"prism-code language-"+n,style:void 0!==o?o.root:{},getLineProps:this.getLineProps,getTokenProps:this.getTokenProps})},t}(o.Component);t.a=m},183:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(181),i=n(164),o=n(4),c=n(162),a=n(165),u=n(0),s=n.n(u),l=function(e){function t(t){var n;return n=e.call(this,t)||this,Object(c.a)(Object(i.a)(n),"context",void 0),Object(c.a)(Object(i.a)(n),"ref",void 0),n.ref=Object(u.createRef)(),n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.context.add(this)},n.render=function(){if(1!==u.Children.count(this.props.children))throw new Error("<ThreeView /> must have a single child.");return s.a.createElement(s.a.Fragment,null,s.a.cloneElement(this.props.children,{ref:this.ref}))},Object(r.a)(t,[{key:"object3d",get:function(){return this.ref.current}}]),t}(u.Component);Object(c.a)(l,"contextType",a.EntityContext),l.__componentClassId__=100},187:function(e,t,n){e.exports={example:"example_1hIu"}},188:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(0),i=n.n(r),o=n(194),c=n(3),a=n(182),u=function(e){return i.a.createElement(a.a,Object(c.a)({},a.b,{code:e.code,language:"tsx"}),(function(e){var t=e.className,n=e.style,r=e.tokens,o=e.getLineProps,c=e.getTokenProps;return i.a.createElement("pre",{className:t,style:n},r.map((function(e,t){return i.a.createElement("div",o({line:e,key:t}),e.map((function(e,t){return i.a.createElement("span",c({token:e,key:t}))})))})))}))},s=n(187),l=n.n(s),f=function(e){return i.a.createElement("div",{style:{display:"flex",alignItems:"stretch",flexDirection:"column"}},i.a.createElement("div",{className:l.a.example,style:Object.assign({marginBottom:"1em",position:"relative",overflow:"hidden",padding:"1em"},e.style||{})},i.a.createElement(o.a,null,(function(){return e.children}))),e.code&&i.a.createElement(u,{code:e.code}))}},262:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(3),i=n(7),o=n(0),c=n(189);var a=function(e){return function(t){e.forEach((function(e){"function"==typeof e?e(t):null!=e&&(e.current=t)}))}};const u=Object(o.forwardRef)((e,t)=>{let{makeDefault:n=!1}=e,u=Object(i.a)(e,["makeDefault"]);const s=Object(c.d)(({set:e})=>e),l=Object(c.d)(({camera:e})=>e),f=Object(c.d)(({size:e})=>e),p=Object(o.useRef)();return Object(o.useLayoutEffect)(()=>{const{current:e}=p;e&&(e.aspect=f.width/f.height,e.updateProjectionMatrix())},[f,u]),Object(o.useLayoutEffect)(()=>{if(n&&p.current){const e=l;return s(()=>({camera:p.current})),()=>s(()=>({camera:e}))}},[l,p,n,s]),Object(o.createElement)("perspectiveCamera",Object(r.a)({ref:a([p,t])},u))})}}]);